# API

Welcome to the Hiero API documentation. This guide will help you integrate Hiero\'s powerful features into your applications.

## Getting Started

To use the Hiero API, you\'ll need to:

1. Sign up for a Hiero account
2. Create an app in your developer dashboard
3. Generate an API key for your app
4. Obtain a user connection key for each user of your app

## Authentication

All API requests must be authenticated using two keys:

1. Your Developer API Key
2. A User Connection Key

Include these keys in the headers of your requests:

```http
X-Developer-API-Key: YOUR_DEVELOPER_API_KEY
X-User-Connection-Key: USER_CONNECTION_KEY
```

## API Endpoints

### Deduct Tokens

Deducts tokens from a user\'s account.

- **URL**: \`/api/tokens/deduct\`
- **Method**: \`POST\`
- **Headers**:
  - \`X-Developer-API-Key\`: Your Developer API Key
  - \`X-User-Connection-Key\`: User Connection Key
  - \`Content-Type\`: \`application/json\`

#### Request Body

```json
{
  "amount": number,
  "multiplier": number (optional, default: 1.0),
  "model": string (optional),
  "label": string (optional)
}
```

#### Response

```json
{
  "success": boolean,
  "newBalance": number,
  "message": string,
  "deductedAmount": number
}
```

#### Error Response

```json
{
  "error": string
}
```

#### Example

```javascript
const response = await fetch("https://api.hiero.com/api/tokens/deduct", {
	method: "POST",
	headers: {
		"X-Developer-API-Key": "YOUR_DEVELOPER_API_KEY",
		"X-User-Connection-Key": "USER_CONNECTION_KEY",
		"Content-Type": "application/json",
	},
	body: JSON.stringify({
		amount: 100,
		multiplier: 1.5,
		model: "gpt-4",
		label: "Chat completion",
	}),
});

const data = await response.json();
```

### Get Token Balance

Retrieves the current token balance for a user.

- **URL**: \`/api/tokens/balance\`
- **Method**: \`GET\`
- **Headers**:
  - \`X-Developer-API-Key\`: Your Developer API Key
  - \`X-User-Connection-Key\`: User Connection Key

#### Response

```json
{
  "balance": number
}
```

#### Error Response

```json
{
  "error": string
}
```

#### Example

```javascript
const response = await fetch("https://api.hiero.com/api/tokens/balance", {
	method: "GET",
	headers: {
		"X-Developer-API-Key": "YOUR_DEVELOPER_API_KEY",
		"X-User-Connection-Key": "USER_CONNECTION_KEY",
	},
});

const data = await response.json();
```

## Error Handling

The API uses conventional HTTP response codes to indicate the success or failure of requests:

- 200: Success
- 400: Bad Request
- 401: Unauthorized
- 404: Not Found
- 500: Internal Server Error

When an error occurs, the response will include an \`error\` field with a description of the problem.

## Rate Limiting

To ensure fair usage and protect our services, the API implements rate limiting. If you exceed the rate limit, you\'ll receive a \`429 Too Many Requests\` response. Please implement appropriate backoff strategies in your applications.

## Best Practices

1. Always store your Developer API Key securely and never expose it in client-side code.
2. Implement proper error handling in your applications to gracefully handle API errors.
3. Use appropriate multipliers when deducting tokens to account for different usage scenarios.
4. Regularly check and update the user\'s token balance to ensure a smooth user experience.

For any questions or support, please contact our developer support team at dev-support@hiero.com.
